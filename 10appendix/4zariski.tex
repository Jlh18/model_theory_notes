%%Notes on Zariski Topology stuff
\section{Strong Nullstellensatz and Prime Spectra}
We use the `Rabinowitsch trick' to prove strong Nullstellensatz
from the weak version. 
This is also from Atiyah and McDonald's book \cite{atiyah}.
\begin{prop}[Strong Nullstellensatz]
    \link{strong_nullstellensatz_appendix}
    Let $K$ be an algebraically closed field and suppose 
    $\f{a}$ is an ideal of $K[x_1,\dots,x_n]$.
    Then $r(\f{a}) = I(\V(\f{a}))$.
\end{prop}
\begin{proof}
    \begin{forward}
        We show 
        $r(\f{a}) \subs I(\V(\f{a}))$.
        Clearly 
        $I(\V(\f{a})) \subs r(I(\V(\f{a})))$
        and if $f$ is in the radical then 
        $f^n (a) = 0$ and by induction 
        (using that $K[x_1,\dots,x_n]$ is an integral domain) $f(a) = 0$.
        Hence $I(\V(\f{a})) = r(I(\V(\f{a})))$.
        By opening up the definition of 
        $I(\V(\f{a}))$ we can show that 
        $\f{a} \subs I(\V(\f{a}))$.
        Thus \[r(\f{a}) \subs r(I(\V(\f{a}))) = I(\V(\f{a}))\]
    \end{forward}
    \begin{backward}
        Let $g \in I(\V(\f{a}))$.
        Consider the injective ring morphism 
        $\io : K[x_1,\dots,x_n] \to K[x_1,\dots,x_n][y]$ 
        and the polynomial $1 - y \io(g)$ of the codomain.
        Evaluation of this polynomial (in $y$) at any element of 
        $\V_K(\io(\f{a}))$
        gives us $1$. 
        If $\io(\f{a}) + \<1 - y \io(g)\>$ 
        were a proper ideal it would be contained in a maximal ideal 
        \cite{atiyah}
        which is prime, but that maximal ideal would have an empty vanishing
        as everything evaluates to $1$.
        By the weak Nullstellensatz this is a contradiction.
        Hence $\io(\f{a}) + \<1 - y \io(g)\> = \<1\>$
        and there exists a finite sum resulting in $1$:
        \[1 = \sum_{f \in S} \io(f)h_f(y) + (1 - y \io(g))h(y)\]
        If $\io(g) = 0$ then since $\io$ is injective $g = 0$ and 
        so is in $r(\f{a})$.
        Otherwise, we can make $A[\frac{1}{\io(g)}]$
        and evaluate the polynomial at $\frac{1}{\io(g)}$:
        \[1 = \sum_{f \in S} \io(f)h_f(\frac{1}{\io(g)})\]
        Hence there exist $H_f \in \io(\f{a})$ and $m \in \N$ such that
        \[1 = \sum_{f \in S} \io(f)\frac{H_f}{(\io(g))^m}\]
        Hence $\io(g) \in \io(\f{a})$ and so $g \in \f{a}$ 
        by injectivity of $\io$.
    \end{backward}
\end{proof}

\begin{cor}[Galois correspondence between ideals and vanishings]
    \link{galois_correspondence_ideals_vanishings}
    Let $K$ be an algebraically closed field.
    If $X \subs K^n$ is Zariski closed then $\V(I(X)) = X$. 
    Thus we have 
    \linkto{taking_ideals_order_reversing}{order reversing} bijections:
    \begin{cd}
        \set{\V \subs K^n \st \text{vanishing}} 
        \ar[r,rightharpoonup,"I(\star)",shift left = 1]
        \ar[r,leftharpoondown,"\V(\star)",swap,shift right = 1]
        &\set{\f{a} \leq K[x_1,\dots,x_n] \st r(\f{a}) = \f{a}}
    \end{cd}
\end{cor}
\begin{proof}
    There exists a prime ideal $\f{a} \leq K[x_1,\dots,x_n]$ such that 
    $X = \V(\f{a})$ and $\f{a}$ is the radical of itself.
    By \linkto{strong_nullstellensatz_appendix}{strong Nullstellensatz}
    we have that $I(\V(\f{a})) = \f{a}$ thus $\V(I(\V(\f{a}))) = \V(\f{a})$.
    Hence $\V(I(X)) = X$.
\end{proof}

\begin{prop}[Irreducible]
    \link{irreducible_equiv_defs}
    If $X$ is a non-empty topological space
    then the following are equivalent:
    \begin{enumerate}
        \item Any non-empty open set is dense in $X$.
        \item Any pair of non-empty open subsets intersect non-trivially.
        \item Any two closed proper subsets do not form a cover of $X$.
    \end{enumerate}
\end{prop}
\begin{proof}
    $(1. \implies 2.)$ Let $U,V \subs Y$ be open.
    $\bar{V} = X$ by assumption.
    Hence $\nothing \ne U \subs \bar{V}$ 
    and so their intersection is non-trivial.
    Hence $U \cap V$ is non-trivial.

    $(2. \implies 1.)$ Let $U$ be open and non-empty. 
    Then if $\bar{U} \ne X$ then its complement is non-empty and so 
    by assumption $U \cap X \setminus \bar{U}$ is non-empty,
    a contradiction.

    $(2. \iff 3.)$ is clear.
\end{proof}

\begin{dfn}[Regular map]
    Let $X \subs K^n$ and $Y \subs K^m$ be Zariski closed sets over field $K$.
    Then $\rho : X \to Y$ is regular when there exist polynomials 
    $\set{f_i}_{i = 1}^m \subs K[x_1,\dots,x_n]$ such that 
    $\rho$ is the restriction to $X$ of the map $K^n \to K^m$
    \[a \mapsto (f_i(a))_{i=1}^m\]
\end{dfn}

\begin{dfn}[Prime spectrum (Zariski topology)]
    \link{prime_spec_zariski_top}
    In commutative algebra, 
    for any ring $A$ there is a topology $\spec(A)$
    (the spectrum of $A$),
    the set of all prime ideals in $A$.
    This is generated by the closed sets, 
    namely for any $E \subs A$ the set 
    \[V(E) := \set{\f{p} \in \spec(A) \st E \subs \f{p}}\]
    the `vanishing' is closed. 
    (These will generalise the vanishings
    in the classical Zariski topolgy.)
    It can be shown that under finite union and arbitrary intersection of these
    sets are still closed thus it defines a topology on $\spec(A)$.
    Furthermore we have that for any $E \subs A$, 
    $V(E) = V(\<E\>)$ where the latter is the ideal generated by $E$.
\end{dfn}
We wish to relate all this to the classical setting.
We take our ring $A$ to be $K[x_1,\dots,x_n]$.
We will show that the set of vanishings in $\spec(K[x_1,\dots,x_n])$
bijects with
the set of Zariski closed sets in $K^n$.
Then we will take the varieties as the closed sets in $K[x_1,\dots,x_n]$.

\begin{nttn}[Ideal generated by varieties]
    For a subset $X \subs K^n$, 
    we write $I(X)$ to mean the ideal of $X$ in $K[x_1,\dots,x_n]$ to mean
    \[\set{f \in K[x_1,\dots, x_n] \st \forall a \in X, f(a) = 0}\]
\end{nttn}

\begin{prop}[Correspondence between Zariski topology and prime spectrum]
    \link{zariski_correspondence}
    Given $K$ a field and a vanishing in the spectrum of 
    $K[x_1,\dots, x_n]$, there exists a unique variety of some finite 
    subset of $K[x_1,\dots,x_n]$.
    and vice versa.
\end{prop}
\begin{proof}
    Let $V(E) \in B$ then 
    $\<E\>$ is finitely generated by the 
    \linkto{hilbert_basis}{Hilbert basis theorem}
    so there exists some finite subset $S \subs K[x_1, \dots, x_n]$ such that
    \[V(E) = V(\<E\>) = V(\<S\>)\]
    We send $V(E)$ to $\V_K(S)$.
    This is well defined: suppose $V(\<S\>) = V(\<T\>)$ then
    for any prime ideal $\f{p}$, 
    $\<S\> \subs \f{p} \iff \<T\> \subs \f{p}$.
    Hence 
    \[
        r(S) = \bigcap_{\<S\> \subs \f{p} \text{ prime }} \f{p}
        = \bigcap_{\<T\> \subs \f{p} \text{ prime }} \f{p}
        = r(T)
    \]
    Let $a \in \V_K(S)$, then for any $f \in <S>$, $f(a) = 0$.
    To show that $a \in \V_K(T)$,
    let $f \in T$,
    then there exists some $n$ such that $f^n \in <S>$ as $r(S) = r(T)$.
    Hence $f^n(a) = 0$ and since $K[x_1,\dots,x_n]$ is an integral domain,
    by induction $f(a) = 0$.
    Thus $a \in \V_K(T)$.

    This map is clearly surjective and by
    \linkto{strong_nullstellensatz}{strong Nullstellensatz}
    it is injective:
    \[\V_K(S) = \V_K(T) \implies I(\V_K(S)) = I(\V_K(T)) \implies 
    r(S) = I(\V_K(S)) = I(\V_K(T)) = r(T)\]
    hence 
    \[  
        \<S\> \subs \f{p} \iff r(S) \subs \f{p} 
        \iff r(T) \subs \f{p} \iff \<T\> \subs \f{p}
    \]
    Thus $V(S) = V(T)$.
\end{proof}

\begin{prop}[Spec of an infinite field is not Hausdorff]
    \link{spec_not_hausdorff}
    If $K$ is an infinite field then 
    $\spec(K[x_1,\dots,x_n])$ is not Hausdorff.
    In particular if $K$ is 
    \linkto{card_of_alg_closed_fields}{algebraically closed} the above holds.
\end{prop}
\begin{proof}
    Let $\f{p}$ and $\f{q}$ be distinct prime ideals.
    We show that any opens containing 
    each of them have non-trivial intersection.

    Let $U_\f{p}, U_\f{q}$ be open sets containing the respective ideals.
    Closed sets are of the form $V(\f{a})$ for $\f{a}$ an ideal of 
    $K[x_1,\dots,x_n]$ which by the 
    \linkto{hilbert_basis}{Hilbert basis theorem} is finitely generated.
    Hence there exist finite sets $S_\f{p},S_\f{q} \subs K[x_1,\dots,x_n]$
    such that
    \[U_\f{p} = \set{y \in \spec \st r(S_\f{p}) \nsubseteq y}\]
    and similarly for $U_\f{q}$.
    If $S_\f{p}$ contains only $0$ then $U_\f{p}$ would be empty.
    Thus there exist 
    $f \in S_\f{p} \setminus \set{0}, g \in S_\f{p} \setminus \set{0}$.
    It suffices to show that there is a prime ideal that contains neither 
    $f$ nor $g$.

    We can inject $\io : \N \to K$ as $K$ is infinite.
    Define for each $m \in \N$ a prime ideal $\f{a}_m := \<x_1 + \io(m)\>$.
    If for all $m$, $f \in \f{a}_m$ then by the division algorithm $f$
    must be the $0$ polynomial, a contradiction. 
    (Similarly for $g$.) 
    Hence there is some ideal $\f{a}_m$ containing neither $f$ nor $g$.
\end{proof}